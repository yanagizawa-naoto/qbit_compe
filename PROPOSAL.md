
# Quantum Logistics Simulator: 社会実装へ向けた提案書

![Quantum Logistics Vision](quantum_logistics_vision.png)

## 1. 社会課題の背景

### 物流クライシスと「2024年問題」
現代社会において、物流は生命線ですが、深刻なドライバー不足や長時間労働の規制強化（2024年問題）により、**「運べないリスク」**が現実のものとなっています。
特に都市部のラストワンマイル配送においては、複雑な道路事情や再配達の増加により、従来の配送計画では限界が見えています。

- **ドライバー不足**: 労働力人口の減少と高齢化。
- **効率化の限界**: 熟練ドライバーの勘に頼ったルート作成は属人化しており、継承が困難。
- **CO2削減**: 無駄な移動は燃料消費を増やし、環境負荷を高める。

### 私たちが解決すること
配送車両（全エージェント）の動きを**「全体最適（Global Optimization）」**の視点で制御し、総移動距離と時間を最小化することで、限られたリソースでの最大効率化を実現します。

## 2. 提案するソリューション

**Quantum Logistics Simulator** は、量子アニーリング技術を活用した次世代の配送管理システムです。
従来の手法では計算量が爆発してしまう「複数車両の配送計画問題（VRP）」を、量子コンピュータ（およびそのシミュレータ）上で高速に解くことを目指しています。

### 主な特徴
1.  **リアルタイム全体最適化**:
    状況の変化（新たな配送依頼、渋滞、車両の故障など）に応じて、瞬時に全車両のルートを再計算します。
2.  **マルチエージェント協調**:
    個々の車両が勝手に最短経路を選ぶのではなく、システム全体として最も効率が良いように「役割分担」と「経路選択」を同時に行います。

## 3. 技術的アプローチ: Full VRP QUBO

![QUBO Optimization Concept](qubo_optimization_concept.png)

従来の古典的なアプローチでは、計算量を減らすために「エリア分け（クラスタリング）」と「ルート探索（TSP）」を別々の工程として行うのが一般的でした。
しかし、これでは「エリアの境界付近」で非効率が発生してしまいます。

本プロジェクトでは、**「誰が」**配送するかと、**「どの順序で」**配送するかを、**単一の巨大なQUBO（Quadratic Unconstrained Binary Optimization）モデル**として定式化しました。

### 実装詳細
- **言語**: Python (FastAPI Backend)
- **ソルバ**: OpenJij (Simulated Annealing) / Dimod (BQM Construction)
- **定式化**:
    - **決定変数** $x_{k,t,i}$: エージェント $k$ が、ステップ $t$ において、目的地 $i$ を訪問するかどうか（0 or 1）。
    - **目的関数**: 総移動距離の最小化。
    - **制約条件**:
        1. 全ての目的地は、必ず誰か1人によって1回だけ訪問されること。
        2. 各ステップにおいて、各エージェントは1箇所しか訪問できないこと。

これにより、古典コンピュータでは探索が困難な広大な解空間の中から、エネルギー地形の「谷底（最適解）」を量子アニーリング的な手法で探索します。

## 4. デモンストレーション

本デモアプリでは、この技術をブラウザ上で視覚的に体験できます。

- **Scenario**: センター（DEPOT）から出発する複数の配送トラック。
- **Action**: 目的地はランダムに生成され、量子モデルが瞬時に最適ルートを割り当てます。
- **Responsiveness**: エージェントが移動するたびに再計算が走り、例えば「Aさんが遅れているから、近くにいるBさんが代わりにその荷物を持つ」といった動的な最適化が可視化されます。

## 5. 今後の展望

現在はシミュレータ（OpenJij）上で動作していますが、このQUBOモデルはそのまま**実機の量子アニーリングマシン（D-Wave等）**に送信して解かせることが可能です。
物流だけでなく、ドローンの群制御、災害時の避難誘導、工場のAGV搬送など、あらゆる「移動と割当の最適化」に応用できる基盤技術となります。
